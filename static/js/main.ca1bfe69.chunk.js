(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{12:function(t,e,c){"use strict";c.d(e,"a",(function(){return u})),c.d(e,"b",(function(){return i}));var r=c(3),n=c(18),a=c.n(n);a.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var s=function(t){a.a.defaults.headers.common.Authorization="Bearer ".concat(t)},o=function(){a.a.defaults.headers.common.Authorization=""},u={register:function(t){return function(e){e(r.a.registerRequest()),a.a.post("/users/signup",t).then((function(t){var c=t.data;return s(c.token),e(r.a.registerSuccess(c))})).catch((function(t){return e(r.a.registerError(t.message))}))}},logIn:function(t){return function(e){e(r.a.loginRequest()),a.a.post("/users/login",t).then((function(t){var c=t.data;return s(c.token),e(r.a.loginSuccess(c))})).catch((function(t){return e(r.a.logoutError(t.message))}))}},logOut:function(){return function(t){t(r.a.logoutRequest()),a.a.post("/users/logout").then((function(){return o(),t(r.a.logoutSuccess())})).catch((function(e){return t(r.a.logoutError(e.message))}))}},getCurrentUser:function(){return function(t,e){var c=e().auth.token;c&&(s(c),t(r.a.getCurrentUserRequest()),a.a.get("/users/current").then((function(e){var c=e.data;return t(r.a.getCurrentUserSuccess(c))})).catch((function(e){return t(r.a.getCurrentUserError(e.message))})))}}},i={getAuthenticated:function(t){return t.auth.isAuthorized},getUserName:function(t){return t.auth.user.name}}},21:function(t,e,c){"use strict";var r=c(2),n=Object(r.b)("contacts/getContactsRequest"),a=Object(r.b)("contacts/getContactsSuccess"),s=Object(r.b)("contacts/getContactsError"),o=Object(r.b)("contacts/addContactsRequest"),u=Object(r.b)("contacts/addContactsSuccess"),i=Object(r.b)("contacts/addContactsError"),b=Object(r.b)("contacts/deleteContactsRequest"),l=Object(r.b)("contacts/deleteContactsSuccess"),j=Object(r.b)("contacts/deleteContactsError"),O=Object(r.b)("contacts/Filter");e.a={getContactsRequest:n,getContactsSuccess:a,getContactsError:s,addContactsRequest:o,addContactsSuccess:u,addContactsError:i,deleteContactsRequest:b,deleteContactsSuccess:l,deleteContactsError:j,filterContacts:O}},24:function(t,e,c){t.exports={button:"UserMenu_button__35oKs",icon:"UserMenu_icon__rrw06",box:"UserMenu_box__2knHT",title:"UserMenu_title__gBHwt"}},3:function(t,e,c){"use strict";var r=c(2),n=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),s=Object(r.b)("auth/registerError"),o=Object(r.b)("auth/loginRequest"),u=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),l=Object(r.b)("auth/logoutSuccess"),j=Object(r.b)("auth/logoutError"),O=Object(r.b)("auth/getCurrentUserRequest"),g=Object(r.b)("auth/getCurrentUserSuccess"),d=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:n,registerSuccess:a,registerError:s,loginRequest:o,loginSuccess:u,loginError:i,logoutRequest:b,logoutSuccess:l,logoutError:j,getCurrentUserRequest:O,getCurrentUserSuccess:g,getCurrentUserError:d}},48:function(t,e,c){t.exports={container:"Container_container__21OhA"}},49:function(t,e,c){t.exports={page_register:"App_page_register__2Ikd1",page_logins:"App_page_logins__1Dh4S",page_home:"App_page_home__4B3lV",page_contacts:"App_page_contacts__3AFTj",box:"App_box__1nbaA",btn_close_modal:"App_btn_close_modal__corlH",button:"App_button__3F1L1",list_filter:"App_list_filter__2f-fl"}},8:function(t,e,c){t.exports={list:"AppBar_list__2jmJU",item:"AppBar_item__3ssRO",nav:"AppBar_nav__2ZDUH",active_nav:"AppBar_active_nav__XN-WF"}},80:function(t,e,c){"use strict";c.r(e);var r,n,a,s,o,u=c(0),i=c.n(u),b=c(25),l=c.n(b),j=c(16),O=c(45),g=c(9),d=c(28),h=c(5),f=c(2),p=c(7),_=c(21),x=Object(f.c)([],(r={},Object(h.a)(r,_.a.getContactsSuccess,(function(t,e){return e.payload})),Object(h.a)(r,_.a.addContactsSuccess,(function(t,e){return[e.payload].concat(Object(d.a)(t))})),Object(h.a)(r,_.a.deleteContactsSuccess,(function(t,e){var c=e.payload;return t.filter((function(t){return t.id!==c}))})),r)),m=Object(f.c)("",Object(h.a)({},_.a.filterContacts,(function(t,e){return e.payload}))),v=Object(p.c)({items:x,filter:m}),C=c(3),S={name:null,email:null},k=Object(f.c)(S,(n={},Object(h.a)(n,C.a.registerSuccess,(function(t,e){return e.payload.user})),Object(h.a)(n,C.a.loginSuccess,(function(t,e){return e.payload.user})),Object(h.a)(n,C.a.logoutSuccess,(function(){return S})),Object(h.a)(n,C.a.getCurrentUserSuccess,(function(t,e){return e.payload})),n)),E=Object(f.c)(null,(a={},Object(h.a)(a,C.a.registerSuccess,(function(t,e){return e.payload.token})),Object(h.a)(a,C.a.loginSuccess,(function(t,e){return e.payload.token})),Object(h.a)(a,C.a.logoutSuccess,(function(){return null})),a)),A=Object(f.c)(null,(s={},Object(h.a)(s,C.a.registerError,(function(t,e){return e.payload})),Object(h.a)(s,C.a.loginError,(function(t,e){return e.payload})),Object(h.a)(s,C.a.logoutError,(function(t,e){return e.payload})),Object(h.a)(s,C.a.getCurrentUserError,(function(t,e){return e.payload})),s)),U=Object(f.c)(!1,(o={},Object(h.a)(o,C.a.registerSuccess,(function(){return!0})),Object(h.a)(o,C.a.loginSuccess,(function(){return!0})),Object(h.a)(o,C.a.getCurrentUserSuccess,(function(){return!0})),Object(h.a)(o,C.a.logoutSuccess,(function(){return!1})),Object(h.a)(o,C.a.registerError,(function(){return!1})),Object(h.a)(o,C.a.loginError,(function(){return!1})),Object(h.a)(o,C.a.getCurrentUserError,(function(){return!1})),o)),N=Object(p.c)({user:k,token:E,error:A,isAuthorized:U}),y=c(17),R=c(47),q=c.n(R),w=Object(d.a)(Object(f.d)({serializableCheck:{ignoredActions:[y.a,y.f,y.b,y.c,y.d,y.e]}})),z={key:"token",whitelist:["token"],storage:q.a},T=Object(p.c)({contacts:v,auth:Object(y.g)(z,N)}),B=Object(f.a)({reducer:T,middleware:w,devTools:!1}),F={store:B,persistor:Object(y.h)(B)},H=c(6),L="/",M="/contacts",I="/login",J="/register",D=c(20),V=c(29),W=c(12),X=c(1);function Z(t){var e=t.children,c=t.redirectTo,r=Object(V.a)(t,["children","redirectTo"]),n=Object(g.c)(W.b.getAuthenticated);return Object(X.jsx)(H.b,Object(D.a)(Object(D.a)({},r),{},{children:n?e:Object(X.jsx)(H.a,{to:c})}))}function K(t){var e=t.children,c=t.redirectTo,r=Object(V.a)(t,["children","redirectTo"]),n=Object(g.c)(W.b.getAuthenticated);return Object(X.jsx)(H.b,Object(D.a)(Object(D.a)({},r),{},{children:n&&r.restricted?Object(X.jsx)(H.a,{to:c}):e}))}var Q=c(8),G=c.n(Q);function P(){var t=Object(g.c)(W.b.getAuthenticated);return Object(X.jsx)("nav",{children:Object(X.jsxs)("ul",{className:G.a.list,children:[Object(X.jsx)("li",{className:G.a.item,children:Object(X.jsx)(j.b,{exact:!0,to:L,className:G.a.nav,activeClassName:G.a.active_nav,children:"Home"})}),t&&Object(X.jsx)("li",{className:G.a.item,children:Object(X.jsx)(j.b,{exact:!0,to:M,className:G.a.nav,activeClassName:G.a.active_nav,children:"Contacts"})})]})})}var Y=c(82),$=function(){return Object(X.jsxs)("ul",{className:G.a.list,children:[Object(X.jsx)("li",{className:G.a.item,children:Object(X.jsx)(j.b,{to:I,className:G.a.nav,activeClassName:G.a.active_nav,children:"Log in"})},Object(Y.a)()),Object(X.jsx)("li",{className:G.a.item,children:Object(X.jsx)(j.b,{to:J,className:G.a.nav,activeClassName:G.a.active_nav,children:"Sing up"})},Object(Y.a)())]})},tt=c(24),et=c.n(tt);function ct(){var t=Object(g.b)(),e=Object(u.useCallback)((function(){return t(W.a.logOut())}),[t]),c=Object(g.c)(W.b.getUserName);return Object(X.jsxs)("div",{className:et.a.box,children:[Object(X.jsx)("img",{alt:"avatar",width:"40px",height:"auto",src:"https://ik.imagekit.io/s2fpg15d4rx/kisspng-computer-icons-portable-network-graphics-user-icon-my-b-tab-svg-png-icon-free-download-8-584-onl-5bfa37607f3959.2067798415431248325211_-Xj5AVLFlyoz.png"}),Object(X.jsxs)("p",{className:et.a.title,children:["Wellcome ",c," "]}),Object(X.jsxs)("button",{className:et.a.button,onClick:e,children:["Log off",Object(X.jsx)("img",{alt:"logout",className:et.a.icon,src:"https://ik.imagekit.io/s2fpg15d4rx/imgbin_web-hosting-icon-logout-icon-arrow-icon-png_8SQmsSuCZ.png"})]})]})}function rt(){var t=Object(g.c)(W.b.getAuthenticated);return Object(X.jsxs)("header",{children:[Object(X.jsx)(P,{}),t?Object(X.jsx)(ct,{}):Object(X.jsx)($,{})]})}var nt=c(48),at=c.n(nt),st=function(t){var e=t.children;return Object(X.jsx)("div",{className:at.a.container,children:e})},ot=(c(49),Object(u.lazy)((function(){return c.e(1).then(c.bind(null,89))}))),ut=Object(u.lazy)((function(){return c.e(0).then(c.bind(null,90))})),it=Object(u.lazy)((function(){return c.e(2).then(c.bind(null,91))})),bt=Object(u.lazy)((function(){return c.e(4).then(c.bind(null,92))}));function lt(){var t=Object(g.b)();return Object(u.useEffect)((function(){t(W.a.getCurrentUser())}),[t]),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(rt,{}),Object(X.jsx)(st,{children:Object(X.jsx)(u.Suspense,{fallback:Object(X.jsx)("h1",{children:"\u0413\u0440\u0443\u0436\u0443, \u0430\u0436 \u0433\u0430\u0439 \u0448\u0443\u043c\u0438\u0442\u044c) ....."}),children:Object(X.jsxs)(H.d,{children:[Object(X.jsx)(H.b,{path:L,exact:!0,component:ot}),Object(X.jsx)(Z,{path:M,exact:!0,redirectTo:I,children:Object(X.jsx)(ut,{})}),Object(X.jsx)(K,{path:I,redirectTo:M,restricted:!0,children:Object(X.jsx)(it,{})}),Object(X.jsx)(K,{path:J,redirectTo:M,restricted:!0,children:Object(X.jsx)(bt,{})}),Object(X.jsx)(H.a,{to:L})]})})})]})}l.a.render(Object(X.jsx)(i.a.StrictMode,{children:Object(X.jsx)(g.a,{store:F.store,children:Object(X.jsx)(O.a,{loading:Object(X.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u044e......."}),persistor:F.persistor,children:Object(X.jsx)(j.a,{children:Object(X.jsx)(lt,{})})})})}),document.getElementById("root"))}},[[80,5,6]]]);
//# sourceMappingURL=main.ca1bfe69.chunk.js.map